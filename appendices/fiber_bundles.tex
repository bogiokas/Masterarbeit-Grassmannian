\chapter{Fiber Bundles}
The Fiber Bundle is a topological object generalizing the notion of the product space. A fiber bundle $E$ can be thought like a ``twisted product'' of a base topological space $B$ and a fiber space $F$. This means that locally it always looks like a product, but globally it may (homeomorphically) change, while we move in $B$. This is called local triviallity and is the least we can demand of a fiber bundle. Most of the time though, people are interested in fiber bundles with additional structure imposed on the fiber space $F$, such as a group action on $F$. These fiber bundles are said to then be equipped with a ``structure group'' $G<\mathrm{Aut}(F)$. On Chapter~\ref{chap:vec_bundles} we examine the notion of ``vector bundles'', which require that $F$ has the structure of a vector space. Also, it is worth noting at this point that the definition of the ``characteristic classes'' one sees in~\ref{def:char_class} originated from the study of ``sphere bundles'', requiring the fiber to be a sphere.

\begin{definition}\label{def:fiber_bundle} Let $F$, $E$ and $B$ be some topological spaces. A continuous map $p:E\to B$ is called a \ul{fiber bundle with fiber $F$}, if for every $x\in B$ there exists an open neighborhood $x\in U\subseteq B$, and a function $f_U:p^{-1}(U)\to U\times F$ (where $p^{-1}(U)$ has the subspace topology and $U\times F$ the product topology), such that:
\begin{i_enum}
\item $f_U$ is a homeomorphism.
\item  $p|_{p^{-1}(U)}=\pi_1\circ f_U$, i.e. the following diagram commutes:
\begin{center}
\begin{tikzcd}
E\ar[r,"\supseteq",phantom]&[-1em]p^{-1}(U)\ar[d,"p|_{p^{-1}(U)}"']\ar[r,"f_U"]&U\times F\ar[dl,"\pi_1"]\\[2em]
B\ar[r,"\supseteq",phantom]&U
\end{tikzcd}
\end{center}
\end{i_enum}
$B$ is then called \ul{base space} and $E$ \ul{total space} of the fiber bundle. Moreover, for every $x\in B$, the space $p^{-1}(\{x\})$ is called \ul{the fiber over $x$} and is denoted by $F_x$. Notice, that, sometimes, we refer to the fiber bundle just by its total space, if the definition of $p$ is clear, or by the notation $F\to E\overset{p}{\to}B$.
\end{definition}

\begin{remark}\label{rem:fiber_subcover} Let $E\overset{p}{\to} B$ be a fiber bundle, $x\in B$ and $U\subseteq B$ an open neighborhood of $x$, $f_U:p^{-1}(U)\to U\times F$ a homeomorphism as in the Definition~\ref{def:fiber_bundle}, i.e. it makes the following diagram commute:
\begin{center}
\begin{tikzcd}
p^{-1}(U)\ar[d,"p|_{p^{-1}(U)}"']\ar[r,"f_U"]&U\times F\ar[dl,"\pi_1"]\\
U
\end{tikzcd}
\end{center}
Moreover, let $V\subseteq U$ be some other open neighborhood of $x$. Then, $f_V:=f_U|_{p^{-1}(V)}$ is also a homeomorphism between $p^{-1}(V)$ and $V\times F$ as in the Definition~\ref{def:fiber_bundle}, i.e. it makes its associated diagram commute. Indeed, since $V\subseteq U$, $p^{-1}(V)\subseteq p^{-1}(U)$, the restriction $f_U|_{p^{-1}(V)}$ is first of all well defined. Moreover, we will prove that $f_V(p^{-1}(V))=V\times F$:
\begin{itemize}
\item[($\subseteq$)] Let $u\in p^{-1}(V)$. Then, since $f_U$ makes the above diagram commute, $f_V(u)=f_U(u)=(p(u),a)$ for some $a\in F$. Since $p(u)\in V$, $f_V(u)\in V\times F$.
\item[($\supseteq$)] Let $(b,a)\in V\times F$. Then, $p\circ f_U^{-1}(b,a)=b\in V$, thus $f_U^{-1}(b,a)\in p^{-1}(V)$ and $f_V(f_U^{-1}(b,a))=(b,a)$.
\end{itemize}
So, the function $f_V:p^{-1}(V)\to V\times F$ is well defined and a homeomorphism as a restriction of the homeomorphism $f_U$. Also, for every $u\in p^{-1}(V)$, we trivially have $\pi_1\circ f_V(u)=\pi_1\circ f_U(u)=p(u)$, which means that the following diagram commutes:
\begin{center}
\begin{tikzcd}
p^{-1}(V)\ar[d,"p|_{p^{-1}(V)}"']\ar[r,"f_V"]&V\times F\ar[dl,"\pi_1"]\\
U
\end{tikzcd}
\end{center}
\end{remark}

\begin{proposition}\label{prop:same_fiber} Let $p:E\to B$ be a fiber bundle with fiber $F$, then $F_x\cong F$ for all $x\in B$.
\end{proposition}
\begin{proof}
Let $x\in B$. Then, there exists a neighborhood $U$ of $x$ inside $B$ and a homeomorphism $f_U:p^{-1}(U)\to U\times F$, such that
\[p|_{p^{-1}(U)}=\pi_1\circ f_U\]
Then, $f_U|_{F_x}:F_x\to f_U(F_x)$ is also a homeomorphism, as a restriction of a homeomorphism. Moreover, it is easy to see that $f_U(F_x)=\{x\}\times F$:
\begin{itemize}
\item Let $(x',a)\in f_U(F_x)$. This means that there exists some $v\in F_x$ with $f_U(v)=(x',a)$. Since $v\in F_x$, $p(v)=x$ by definition. Then, $x=p(v)=\pi_1\circ f_U(v)=\pi_1(x',a)=x'$, which means, $(x',a)=(x,a)\in\{x\}\times F$.
\item Let $(x,a)\in\{x\}\times F$. Since $f_U$ is surjective, there exists some $v\in p^{-1}(U)$ with $f_U(v)=(x,a)$. Then, $p(v)=\pi_1\circ f_U(v)=\pi_1(x,a)=x$ which means that $v\in p^{-1}(\{x\})=F_x$.
\end{itemize}
$\{x\}\times F$ is trivially homeomorphic to $F$, which proves the assertion.
\end{proof}

Now, one can see how bundles generalize products. Formally, one just needs to choose $U=B$ for every $x$ and $f_B=id$. In fact, products are in this setup the ``trivial'' example.
\begin{definition} Let $F, B$ be two topological spaces, then the projection
\[\pi_1:B\times F\to B\]
is called the \ul{trivial bundle over $B$ with fiber $F$}, where $\pi_1$ is the projection on the first coordinate, i.e.\ $\pi_1(x,a)=x$.
\end{definition}

Historically, the most famous non-trivial example of a fiber bundle has been the M\"obius strip:
\begin{example} Let $B=S^1$, $F=[0,1]$ and $E=\sfrac{[0,1]\times F}{(0,a)\sim(1,1-a)}$. Then $p:E\to B$, with:
\[p([(x,a)]):= x,\qquad\forall [(x,a)]\in E\]
is a fiber bundle.
\end{example}
Notice how this fiber bundle is not the ``same'' as the trivial bundle over the circle with the same fiber. We are going to soon define the notion of bundle maps and isomorphisms, but before going into that let us try the same M\"obius like constructions, i.e.\ let us fix $B=S^1$ and examine how the bundles look like for different choices of fibers $F$ and different equivalence relations $\sim$, which define $E=\sfrac{[0,1]\times F}{\sim}$. The bundle in these examples will always be $p:E\to B$ with $p([(x,a)])=x$.

\begin{examples}
\begin{i_enum}
\item For $F=\{0,1\}$, and $(0,a)\sim(1,1-a)$, $E$ is obviously the boundary of the M\"obius strip, which is topologically a circle. The image of $p$ then traces the circle with twice the speed of the input variable. Notice, that this is different from the trivial bundle with the same fiber over $B$, since the trivial bundle is a disjoint union of two circles.
\item $F=\mathbb{R}$ or $F=(0,1)$, and again $(0,a)\sim(1,1-a)$. This is the open version of the M\"obius strip.
\item $F=S^1\subseteq\mathbb{C}$, and $(0,z)\sim(1,\overline{z})$. This is maybe the second non-trivial example one usually sees, namely the Klein bottle.
\item $F=S^1$ again, but this time $(0,z)\sim(1,-z)$. Notice that this bundle contains the boundary of the M\"obius strip (and in fact the boundary of every rotation of the M\"obius strip around $B$). Moreover, notice that ``turning'' the circle $\{1\}\times S^1$ by $\pi$, before gluing it back to $\{0\}\times S^1$, just produces a total space, which is topologically a torus, i.e.\ $E$ is the ``same'' as the trivial bundle (although it contains a non-trivial one).
\end{i_enum}
\end{examples}

Notice how in the above discussion we first fixed a base space $B$, before starting to ask questions about similarity of bundles. This is so common, that the first definition of a maps between bundles assumes that both involved bundles have the same base space.
\begin{definition}
Let $p_1:E_1\to B$ and $p_2:E_2\to B$ be two fiber bundles with fibers $F_1$ and $F_2$ respectively. A continuous map $\phi:E_1\to E_2$ is a \ul{bundle map from $p_1$ to $p_2$ over $B$}, if $p_1=p_2\circ\phi$, i.e. if the following diagram commutes:
\begin{center}
\begin{tikzcd}
E_1\ar[rd,"p_1"']\ar[rr,"\phi"]&[-2em]&[-2em]E_2\ar[ld,"p_2"]\\
&B
\end{tikzcd}
\end{center}
\end{definition}

\begin{proposition}\label{prop:fiberwise}
Let $p_1:E_1\to B$ and $p_2:E_2\to B$ be two fiber bundles and $\phi:E_1\to E_2$ be any continuous map, then $\phi$ is a bundle map, if and only if
\[\phi\big({(F_1)}_x\big)\subseteq{(F_2)}_x,\qquad\forall x\in B\]
i.e.\ iff $\phi$ maps every fiber over $x$, of the left fiber bundle, to the fiber over the same $x$, of the right fiber bundle.
\end{proposition}
\begin{proof}
\begin{b_item}
\item[($\Rightarrow$)] Let $\phi:E_1\to E_2$ be a bundle map, $x\in B$ and $v\in {(F_1)}_x$. Then $(p_2\circ\phi)(v)=p_1(v)=x$, which proves that $\phi(v)\in{(F_2)}_x$.
\item[($\Leftarrow$)] Let $\phi:E_1\to E_2$ be a continuous map, with $\phi\big({(F_1)}_x\big)\subseteq{(F_2)}_x$ for every $x\in B$. Moreover, let $v\in E_1$. Then, trivially, $v\in {(F_1)}_{p_1(v)}$, which gives $\phi(v)\in {(F_2)}_{p_1(v)}$, which means exactly that $(p_2\circ\phi)(v)=p_1(v)$.\qedhere
\end{b_item}
\end{proof}

\begin{definition}
Let $p_1:E_1\to B$ and $p_2:E_2\to B$ be two fiber bundles with fibers $F_1$ and $F_2$ respectively and let $\phi:E_1\to E_2$ be a bundle map from $p_1$ to $p_2$ over $B$. The map $\phi$ is called a \ul{bundle isomorphism}, if $\phi$ is a homeomorphism.
\end{definition}

\begin{proposition}
Let $p_1:E_1\to B$ and $p_2:E_2\to B$ be two fiber bundles with fibers $F_1$ and $F_2$ respectively and let $\phi:E_1\to E_2$ be a bundle isomorphism map from $p_1$ to $p_2$ over $B$. Then, for every $x\in B$, the map
\[\phi_x:{\left(F_1\right)}_x\to{\left(F_2\right)}_x\]
with $\phi_x(v)=\phi(v)$ for every $v\in\left(F_1\right)_x$ is a homeomorphism with $(\phi_x)^{-1}=\big(\phi^{-1}\big)_x$.
\end{proposition}
\begin{proof} First of all, the map $\phi_x$ is well defined because of Proposition~\ref{prop:fiberwise}. Moreover, $\phi_x$ is surjective. Indeed, let $v_2\in (F_2)_x$. Since $\phi$ is surjective, there exists some $v_1\in E_1$ such that $\phi(v_1)=v_2$. Since $\phi$ is a bundle map, it is true that $p_1(v_1)=p_2\circ\phi(v_1)=p_2(v_2)=x$, which means that $v_1\in(F_1)_x$. This proves that
\[\phi_x=\phi|_{{(F_1)}_x}:{(F_1)}_x\to\phi\big({(F_1)}_x\big)\]
and thus is a homeomorphism as a restriction of one. The fact that $\phi_x^{-1}$ is the restriction of $\phi^{-1}$ on ${(F_2)}_x$ follows by symmetry.
\end{proof}

We want now to investigate if the opposite is true. Given two fiber bundles $p_1, p_2$ over some space $B$ that have isomorphic fibers over each $b\in B$, could we ``glue'' these isomorphisms to a global one between the fiber bundles themselves? We immediately see that the information we get only from the fibers is not enough to reconstruct the whole bundle, since it is clear from the above examples that there are non-isomorphic fiber bundles $E_1, E_2$ over a space $B$, which have the same fiber $F$. In such cases, we cannot even construct a map $\phi:E_1\to E_2$ making the following diagram commutative, let alone construct an isomorphism.
\begin{center}
\begin{tikzcd}
E_1\ar[rd,"p_1"']\ar[rr,"\phi"]&[-2em]&[-2em]E_2\ar[ld,"p_2"]\\
&B
\end{tikzcd}
\end{center}
In order to resolve this, we should at least require that there already exists some bundle map $\phi$, the slices of which are the fiber-wise isomorphisms and ask if this is enough for $\phi$ to be an isomorphism. Remarkably, this is in general not true, as we exhibit in the following example. It is based on an example given in \cite{counterexample} of an exponentiable space, whose set of homeomorphisms does not form a topological group, because the inverse map isn't continuous.

\begin{example}\label{ex:counterexample} Let $B\subseteq[0,1]$ be a converging sequence, together with its limit:
\[B=\left\{\frac{1}{n}:n\in\mathbb{N}\right\}\cup\left\{0\right\}\]
and $F\subseteq[0,1]$ be a Cantor set, without its leftmost point:
\[F=\left\{\sum_{i=1}^{\infty}\frac{\alpha_n}{3^n}:\alpha_n\in\{0,2\}\right\}\setminus\{0\}\]
both equipped with the subspace topology. Moreover let $E_1,E_2$ be the trivial bundle over $B$, with fiber $F$, i.e. $E_1=E_2=B\times F$. Define now the following function $f:E_1\to E_2$:
\begin{center}
\begin{tabular}{ccc}
\begin{tikzcd}
f\ar[r,phantom,":"]&[-.8cm]B\times F\ar[r]&B\times F\\[-1.2em]
&(b,x)\ar[r,mapsto]&(b,f_b(x))
\end{tikzcd}
&,&
$\displaystyle f_b=\left\{\begin{array}{ll}
1_F&,b=0\\[1.2em]
h_n&,b=\frac{1}{n}
\end{array}\right.$
\end{tabular}
\end{center}
where $h_n:F\to F$ is defined as follows:
\begin{center}
\begin{tabular}{cc}
$\displaystyle h_n(x)=\left\{\begin{array}{ll}
3x&,x\in\left(0,\frac{1}{3^{n+1}}\right]\cap F\\[1em]
x+1-\frac{1}{3^n}&,x\in\left[\frac{2}{3^{n+1}},\frac{1}{3^n}\right]\cap F\\[1em]
x&,x\in\left[\frac{2}{3^n},1-\frac{2}{3^n}\right]\cap F\\[1em]
\frac{1}{3}x+\frac{2}{3}-\frac{2}{3^{n+1}}&,x\in\left[1-\frac{1}{3^n},1\right]\cap F
\end{array}\right.$
&
\end{tabular}
\begin{tikzpicture}[baseline=0, decoration=Cantor set]
\def\d{5}
\node at (0,0) {$h_2$};
\coordinate (O) at (-\d/2,-\d/2);
%\draw[->,very thin,gray,dotted] (O) + (-.2,0) -- +(\d+0.2,0);
%\draw[->,very thin,gray,dotted] (O) + (0,-.2) -- +(0,\d+0.2);
\draw[thick] decorate{ decorate{ decorate{ decorate{ (O) -- +(\d,0) }}}};
\draw[thick] decorate{ decorate{ decorate{ decorate{ (O) -- +(0,\d) }}}};

\draw[red, thick] decorate{ decorate{ (O) -- +(\d/27,\d/9) }};
\draw[red, thick] decorate{ (O) +(2*\d/27,\d-\d/27) -- +(\d/9,\d) };
\draw[red, thick] decorate{ decorate{ (O) +(2*\d/9,2*\d/9) -- +(\d/3,\d/3) }};
\draw[red, thick] decorate{ decorate{ (O) +(\d-\d/3,\d-\d/3) -- +(\d-2*\d/9,\d-2*\d/9) }};
\draw[red, thick] decorate{ decorate{ (O) +(\d-\d/9,\d-\d/9) -- +(\d,\d-2*\d/27) }};

\draw[very thin, gray, dotted] (O) +(\d/27,0) -- +(\d/27,\d/9);
\draw[very thin, gray, dotted] (O) +(2*\d/27,0) -- +(2*\d/27,\d-\d/27);
\draw[very thin, gray, dotted] (O) +(\d/9,0) -- +(\d/9,\d);
\draw[very thin, gray, dotted] (O) +(2*\d/9,0) -- +(2*\d/9,2*\d/9);
\draw[very thin, gray, dotted] (O) +(\d-2*\d/9,0) -- +(\d-2*\d/9,\d-2*\d/9);
\draw[very thin, gray, dotted] (O) +(\d-\d/9,0) -- +(\d-\d/9,\d-\d/9);
\draw[very thin, gray, dotted] (O) +(\d,0) -- +(\d,\d-2*\d/27);

\draw[very thin, gray, dotted] (O) +(0,\d/9) -- +(\d/27,\d/9);
\draw[very thin, gray, dotted] (O) +(0,\d-\d/27) -- +(2*\d/27,\d-\d/27);
\draw[very thin, gray, dotted] (O) +(0,\d) -- +(\d/9,\d);
\draw[very thin, gray, dotted] (O) +(0,2*\d/9) -- +(2*\d/9,2*\d/9);
\draw[very thin, gray, dotted] (O) +(0,\d-2*\d/9) -- +(\d-2*\d/9,\d-2*\d/9);
\draw[very thin, gray, dotted] (O) +(0,\d-\d/9) -- +(\d-\d/9,\d-\d/9);
\draw[very thin, gray, dotted] (O) +(0,\d-2*\d/27) -- +(\d,\d-2*\d/27);
\end{tikzpicture}
\end{center}
We will prove that $f$ is a bundle map, but it isn't a homeomorphism, although $f_b$ is a homeomorphism for every $b\in B$.

First of all, $f_0$ is trivially a homeomorphism and it is easy to see that $h_n$ is always a homeomorphism, since it is bijective and linear on clopen subsets of $F$. Now, let us prove that $f$ is continuous. It then will immediately follow that $f$ is also a bundle map, since $\pi_1\circ f=\pi_1$.

We will first define the function $g_f:B\times F\to F$, with $g_f:=\pi_2\circ f$. Notice that $g_f(x,a)=f_x(a)$ for every $(x,a)\in B\times F$. Since $F$ is Hausdorff and locally compact, the space $Top(F,F)$, topologised with the compact-open topology has the following properties, as we proved in Proposition~\ref{prop:exponential_object}:
\begin{itemize}
\item The evaluation map $ev:\mathrm{Top}(F,F)\times F\to F$, defined by $(f,x)\mapsto f(x)$ is continuous.
\item For every topological space $T$ and any function $g:T\times F\to F$, there exists a unique function $g^{\#}:T\to\mathrm{Top}(F,F)$ such that $g=ev\circ(g^{\#}\times 1_F)$.
\item $g$ is continuous if and only if $g^{\#}$ is continuous.
\end{itemize}

In our example, if we let $\tilde{g}_f:B\to\mathrm{Top}(F,F)$ to be the function taking $b$ to $f_b$, we have the following commutative diagram:
\begin{center}
\begin{tikzcd}
B\times F\ar[r,"\tilde{g}_f\times 1_F"]\ar[d,"g_f"]&\mathrm{Top}(F,F)\times F\ar[dl,"ev"]\\
F
\end{tikzcd}
\end{center}
which proves that $g_f^{\#}=\tilde{g}_f$, due to the uniqueness property. Thus, $g_f$ is continuous, if and only if $\tilde{g}_f$ is continuous., which is equivalent to $\lim_{n\to\infty}h_n=1_F$ in $\mathrm{Top}(F,F)$.

In order to show this, we need to prove that every open neighborhood of $1_F$ contains every $h_n$ for some big enough $n$. In fact, it suffices to check this only for these neighborhoods of $1_F$ that are elements in a subbasis of the topology of $\mathrm{Top}(F,F)$, so we will only regard open sets in the following family:
\[\Big\{S(K,O):=\{f:K\to O\,|\,f(K)\subseteq O\}\ \Big|\ K,O\subseteq F,\ K\text{ compact},\ O\text{ open}\Big\}\]
Let $S(K,O)$ be such a set in the neighborhood of $1_F$. This means that $K\subseteq O$. First of all, notice, that there exists some $n_1\in\mathbb{N}$ such that $\frac{1}{3^n}<\min K$ for all $n\geq n_1$. We now examine the following two cases:
\begin{itemize}
\item[$1\not\in K$:] In this case, there exists also a $n_2\in\mathbb{N}$ such that $1-\frac{1}{3^n}>\max K$ for all $n\geq n_2$. This means that $K\subseteq[\frac{2}{3^n},1-\frac{2}{3^n}]$ for all $n\geq\max\{n_1,n_2\}$, which means that $h_n(K)=K\subseteq O$, i.e. $h_n\in S(K,O)$.
\item[$1\in K$] In this case, there exists some $n_2'\in\mathbb{N}$ such that $V_n:=[1-\frac{1}{3^n},1]\cap F\subseteq O$ for every $n\geq n_2'$. Then, $h_n(V_n\cap K)\subseteq h_n(V_n)\subseteq V_n\subseteq O$ for every $n\geq n_2'$ and also, like in the previous case, $h_n(K\setminus V_n)= h_n(K\cap[\frac{2}{3^n},1-\frac{2}{3^n}]\cap F)=K\cap[\frac{2}{3^n},1-\frac{2}{3^n}]\cap F\subseteq O$ for every $n\geq n_1$. Thus, $h_n\in S(K,O)$ for every $n\geq\max\{n_1,n_2'\}$.
\end{itemize}
This proves the continuity of $\tilde{g}_f$, which implies the continuity of $g_f$. So, by the universal property of the product, there exists a unique continuous $\left<\pi_1,g_f\right>:B\times F\to B\times F$ as in the following commutative diagram:
\begin{center}
\begin{tikzcd}
B&B\times F\ar[l,"\pi_1"']\ar[r,"\pi_2"]&F\\[1em]
&B\times F\ar[ul,"\pi_1"]\ar[u,dotted,"\left<\pi_1{,}g_f\right>" description,background color=none]\ar[ur,"g_f"']
\end{tikzcd}
\end{center}
Notice that $\left<\pi_1,g_f\right>(x,a)=(x,f_x(a))=f(x,a)$, which proves that $f$ is continuous.

Lastly, we will prove that $f^{-1}$ is not continuous using the same machinery. So, $f^{-1}$ is continuous if and only if $g_{f^{-1}}:B\times F\to F$, with $g_{f^{-1}}(x,a)=f^{-1}_x(a)$ is continuous. This, again, is the case if and only if $g_{f^{-1}}^{\#}=\tilde{g}_{f^{-1}}:B\to\mathrm{Top}(F,F)$, taking $b$ to $f_b^{-1}$ is continuous, which is equivalent to $\lim_{n\to\infty}h_n^{-1}=1_F^{-1}=1_F$ in $\mathrm{Top}(F,F)$. So, it remains to prove that this limit doesn't converge to $1_F$.

Let $V_n:=[1-\frac{1}{3^n},1]\cap F$. This is both open and compact, so $S(V_n,V_n)$ is a subbasic neighborhood of $1_F$. For every $n\in\mathbb{N}$ we have that $h_n^{-1}(1)=\frac{1}{3^n}<1-\frac{1}{3^n}=\min V_n$, which means that for every $n\in\mathbb{N}$, $h_n^{-1}(V_n)\not\subseteq V_n$, i.e. $h^{-1}_n\not\in S(V_n,V_n)$.
\end{example}

As we've seen in Theorem~\ref{thm:inverse}, we know some sufficient conditions in order to lift the pathogen of the inverse mapping not being continuous, so we will now prove that the above example wouldn't fail if $F$ was also locally connected in addition to being Hausdorff and locally compact:

%We will now prove the following theorem, which is based on Theorem~4 in \cite{top_group} which proves the continuity of the inverse operator on $\mathrm{Top}(F,F)$, provided that $F$ has some good properties

\begin{theorem} Let $F$ be a Hausdorff, locally compact, locally connected topological space and let $p_1: E_1\to B$ and $p_2: E_2\to B$ be two fiber bundles with fibers $F_1$ and $F_2$ respectively, both isomorphic to $F$. Moreover, let $\phi:E_1\to E_2$ be a bundle map such that its restriction
\[\phi_x:(F_1)_x\to (F_2)_x\]
with $\phi_x(v)=\phi(v)$ is a homeomorphism for every $x\in B$. Then $\phi$ is also a homeomorphism.
\end{theorem}
\begin{proof} First of all, it is easy to see that $\phi$ is a bijection:
\begin{itemize}
\item Let $u_1,u_2\in E_1$ and $\phi(u_1)=\phi(u_2)$. Since $\phi$ is a bundle map, we have:
\[p_1(u_1)=p_2(\phi(u_1))=p_2(\phi(u_2))=p_1(u_2)=:x_0\]
So, $u_1,u_2\in\left(F_1\right)_{x_0}$ and $\phi_{x_0}(u_1)=\phi(u_1)=\phi(u_2)=\phi_{x_0}(u_2)$. Since $\phi_{x_0}$ is injective, $u_1=u_2$, which proves that $\phi$ is injective as well.
\item Let $v\in E_2$. For $x_0:=p_2(v)$, we have that $v\in\left(F_2\right)_{x_0}$. Since $\phi_{x_0}$ is surjective, there exists some $u\in\left(F_1\right)_{x_0}\subseteq E_1$ with $\phi(u)=\phi_{x_0}(u)=v$, proving that $\phi$ is also surjective.
\end{itemize}
It now remains to prove that $\phi^{-1}$ is continuous as well. For every $x\in B$, there exist open neighborhoods ${(U_1)}_x,{(U_2)}_x$ of $x$, such that $p_1^{-1}({(U_1)}_x)$ is isomorphic to $U_1\times F_1$ and $p_2^{-1}({(U_2)}_x)$ is isomorphic to $U_2\times F_2$, satisfying the commutative diagrams of the Definition~\ref{def:fiber_bundle}. Let $U_x:=(U_1)_x\cap(U_2)_x$. Then, as seen in Remark~\ref{rem:fiber_subcover}, $U_x$ satisfies the requirements of the \ref{def:fiber_bundle}, which means there exist homeomorphisms $(f_1)_{U_x}:p_1^{-1}(U_x)\to U_x\times F_1$ and $(f_2)_{U_x}:p_2^{-1}(U_x)\to U_x\times F_2$ making the following diagrams commute:
\begin{center}
\begin{tikzcd}
p_1^{-1}(U_x)\ar[d,"p_1|_{p_1^{-1}(U_x)}"']\ar[r,"(f_1)_{U_x}"]&U_x\times F_1\ar[dl,"\pi_1"]&&
p_2^{-1}(U_x)\ar[d,"p_2|_{p_2^{-1}(U_x)}"']\ar[r,"(f_2)_{U_x}"]&U_x\times F_2\ar[dl,"\pi_1"]\\
U_x&&&U_x
\end{tikzcd}
\end{center}
Let $\mathcal{U}=\{U_x:x\in B\}$. Since $\{p_2^{-1}(U):U\in\mathcal{U}\}$ forms an open cover of $E_2$, it suffices to show that $\phi^{-1}|_{p_2^{-1}(U)}$ is continuous for every $U\in\mathcal{U}$ and then apply the glueing lemma. Let us fix such a $U\in\mathcal{U}$. Then, the above commutative diagrams let us define the map $\psi:U\times F\to U\times F$ as the following composition:
\vspace*{-1em}
\begin{center}
\begin{tikzcd}
U\times F\ar[r,"\cong"']\ar[drrr,"\pi_1"',near start]\ar[rrrrrr,bend left=10,dotted,"\psi"]&U\times F_1\ar[r,"\cong"',"(f_1)_U^{-1}"]\ar[drr,"\pi_1"',near start]&p_1^{-1}(U)\ar[rr,"\phi|_{p_1^{-1}(U)}"]\ar[dr,"p_1"',near start]&[-2em]&p_2^{-1}(U)\ar[r,"\cong"',"(f_2)_U"]\ar[dl,"p_2",near start]&U\times F_2\ar[r,"\cong"']\ar[dll,"\pi_1",near start]&U\times F\ar[dlll,"\pi_1",near start]\\[2em]
&&&U
\end{tikzcd}
\end{center}
This means that the map $\psi$ has the following properties:
\begin{itemize}
\item $\psi$ is continuous and a bijection.
\item For every $x\in U$ there exists some map $\psi_x:F\to F$ such that $\psi(x,a)=(x,\psi_x(a))$. These $\psi_x$ are homeomorphisms, since the following diagram commutes for every $x\in U$:
\vspace*{-1em}
\begin{center}
\begin{tikzcd}
F\ar[r,"\cong"']\ar[rrrrr,bend left=15,"\psi_x"]&\{x\}\times F_1\ar[r,"\cong"']&(F_1)_x\ar[r,"\cong"',"\phi_x"]&(F_2)_x\ar[r,"\cong"']&\{x\}\times F_2\ar[r,"\cong"']&F
\end{tikzcd}
\end{center}
\item $\phi^{-1}|_{p_2^{-1}(U)}=(\phi|_{p_1^{-1}(U)})^{-1}$ is continuous if and only if $\psi^{-1}$ is continuous.
\end{itemize}
Essentially, we have reduced the problem to the case of $E_1,E_2$ both being the trivial bundle $U\times F$ and $\psi:U\times F\to U\times F$.

Now, we follow the same arguments we used in the Example~\ref{ex:counterexample}. First, define the continuous $g_{\psi}:U\times F\to F$ with $g_{\psi}=\pi_2\circ\psi$, i.e. $g_{\psi}(x,a)=\psi_x(a)$. Since $F$ is Hausdorff and locally compact, the space $\mathrm{Top}(F,F)$, topologised with the compact-open topology, together with the map $ev:\mathrm{Top}(F,F)\times F\to F$ has the final property proved in Proposition~\ref{prop:exponential_object}. So, there exists a unique continuous $g_{\psi}^{\#}:U\to\mathrm{Top}(F,F)$ making the following diagram commute:
\begin{center}
\begin{tikzcd}
U\times F\ar[r,"g_{\psi}^{\#}\times 1_F"]\ar[d,"g_{\psi}"']&\mathrm{Top}(F,F)\times F\ar[dl,"ev"]\\
F
\end{tikzcd}
\end{center}
Notice that $g_{\psi}^{\#}(x)=\psi_x$, since this makes the above diagram commute and $g_{\psi}^{\#}$ is unique. This also means in particular that $g_{\psi}^{\#}(U)\subseteq\mathrm{Hom}(F)$. Since $F$ is additionally locally connected, the map $(-)^{-1}:\mathrm{Hom}(F)\to\mathrm{Hom}(F)$ is continuous, as we proved in Theorem~\ref{thm:inverse}, where $\mathrm{Hom}(F)\subseteq\mathrm{Top}(F,F)$ is equipped with the subspace topology. Thus, we have a continuous map $h_{\psi}:U\to\mathrm{Top}(F)$ defined by the following composition:
\vspace*{-1em}
\begin{center}
\begin{tikzcd}
U\ar[r,"g_{\psi}^{\#}"]\ar[rrr,bend left=15, dotted, "h_{\psi}"]&\mathrm{Hom}(F)\ar[r,"(-)^{-1}"]&\mathrm{Hom}(F)\ar[r,"i",hook]&\mathrm{Top}(F,F)
\end{tikzcd}
\end{center}
i.e. $h_{\psi}(x)=(g_{\psi}^{\#}(x))^{-1}=\psi^{-1}_x$. This lets us define next the continuous map $h_{\psi}^{\flat}:U\times F\to F$, as the following composition:
\begin{center}
\begin{tikzcd}
U\times F\ar[r,"h_{\psi}\times 1_F"]\ar[d,"h_{\psi}^{\flat}"']&\mathrm{Top}(F,F)\times F\ar[dl,"ev"]\\
F
\end{tikzcd}
\end{center}
Notice that $h_{\psi}^{\flat}(x,a)=ev(\psi^{-1}_x,a)=\psi^{-1}_x(a)$. By the universal property of the product, we now get a unique continuous map $\left<\pi_1,h_{\psi}^{\flat}\right>:U\times F\to U\times F$ as in the diagram:
\begin{center}
\begin{tikzcd}
U&U\times F\ar[l,"\pi_1"']\ar[r,"\pi_2"]&F\\[1em]
&U\times F\ar[ul,"\pi_1"]\ar[u,dotted,"\left<\pi_1{,}h_{\psi}^{\flat}\right>" description,background color=none]\ar[ur,"h_{\psi}^{\flat}"']
\end{tikzcd}
\end{center}
where $\left<\pi_1,h_{\psi}^{\flat}\right>(x,a)=\big(x,\psi_x^{-1}(a)\big)=\psi^{-1}(x,a)$, for every $(x,a)\in U\times F$, which proves finally that $\psi^{-1}$ is continuous.
\end{proof}





\begin{example} Define the topological spaces $B=(\mathbb{R}, \tau)$ and $B'=(\mathbb{R}, \tau')$, where $\tau$ is the usual topology on $\mathbb{R}$ generated by the open intervals and $\tau'$ is the topology on $\mathbb{R}$ generated by the semi-open intervals, i.e. of all intervals of the form $[a,b)$. Then examine the following diagram:
\begin{center}
\begin{tikzcd}
B'\ar[rd,"p_1\ =\ id_{\mathbb{R}}"']\ar[rr,"\phi\ =\ id_{\mathbb{R}}"]&[-1.5em]&[-1.5em]B\ar[ld,"p_2\ =\ id_{\mathbb{R}}"]\\
&B
\end{tikzcd}
\end{center}
\end{example}

Now that we have defined what an isomorphism of two fiber bundles is, let us examine what it means for a fiber bundle to be isomorphic to the trivial bundle.

\begin{remark}
Let $p:E\to B$ be a fiber bundle with fiber $F$. Then, $p$ is isomorphic to a trivial fiber bundle, if and only if there exists a map
\[\phi:F\times B\to E\]
such that, for every $x\in B$:
\begin{i_enum}
\item $p\circ\phi(a,x)=x$ (i.e. $\phi$ is a bundle map), and
\item The restriction map $p_x:F\times\{x\}\to p^{-1}(\{x\})$ is an homeomorphism. (i.e. $\phi$ is a bundle isomorphism).
\end{i_enum}
\end{remark}



%%%%TODO
%- pullback





%---------
%%%TODO: build proof environment for equivalences
%
%
%%%TODO: check if lex order is used correctly
%
%
%
